# EditorjsRenderer

[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE.txt)

EditorjsRenderer is a Ruby gem that brings [Editor.js](https://editorjs.io/) support to Rails applications.  
It allows rendering JSON data generated by Editor.js into safe HTML and plain text.

---

## Features

- Support for structured content (Editor.js blocks)
- Built-in validation using JSON Schema
- Secure HTML output via escaping
- Configurable block rendering system
- No JavaScript dependencies required on the server side

---

## Installation

Add this line to your Gemfile:

```ruby
gem "editorjs_renderer"
```

And then execute:

```bash
bundle install
```

---

## Usage

```
data = {
  "time" => "123456789",
  "blocks" => [
    { "type" => "paragraph", "data" => { "text" => "Hello <b>world</b>" } }
  ]
}
```

```bash
document = EditorjsRenderer::Document.new(data)
document.render(format: :html)
# => "<p>Hello &lt;b&gt;world&lt;/b&gt;</p>"

document.render(format: :plain)
# => "Hello <b>world</b>"
```

---

## Configuration

The gem includes a default schema for the `paragraph` block, located at:

```
lib/editor_rails/schemas/
```

You can configure enabled block types and schema path:

```ruby
EditorjsRenderer.configure do |config|
  config.enabled_blocks = %w[paragraph]
  config.schemas_path = Rails.root.join("config/editor_schemas").to_s
end
```

Schemas should follow the JSON Schema format and be stored in YAML files.
Each block must have a schema named like paragraph.yml, header.yml, etc.

---

## Development

To run tests and linters:

```bash
bundle exec rake
```

#### Rendering Custom Blocks

To support a new block:

1. Create a class in EditorjsRenderer::Blocks namespace (e.g., Header)
2. Inherit from EditorjsRenderer::Blocks::Base
3. Implement render and plain
4. Add a corresponding schema

```ruby
module EditorjsRenderer
  module Blocks
    class Header < Base
      def render
        "<h1>#{ERB::Util.html_escape(data["text"])}</h1>"
      end

      def plain
        data["text"].to_s
      end
    end
  end
end
```

---

## Contributing

Bug reports and pull requests are welcome on GitHub at https://github.com/lordsynergy/editor_rails.

---

## License

This gem is licensed under the [MIT License](https://opensource.org/license/MIT).
